<!DOCTYPE html>
<html lang="en" class="mti-inactive">

<head>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,900|Merriweather:400" rel="stylesheet" type="text/css">
    <meta charset="utf-8">
    <title>
        mand3l
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="The software, design and robotics portfolio of Paul Mandel.">
    <meta name="author" content="Paul Mandel">
    <link rel="stylesheet" type="text/css" href="/static/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/static/base/css/base.css">
    <link rel="stylesheet" type="text/css" href="/static/home/css/home.css">
    <link rel="stylesheet" type="text/css" href="/static/home/css/portfolio.css">
    <link rel="stylesheet" type="text/css" href="/static/mathscribe/css/jqmath-0.3.0.css">
    <link rel="stylesheet" type="text/css" href="/static/flexslider/flexslider.css">
    <link rel="shortcut icon" href="/static//base/img/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/bootstrap/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/bootstrap/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/bootstrap/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/static/bootstrap/ico/apple-touch-icon-57-precomposed.png">
    <script type="text/javascript" async="" src="/static/snoop/sn.js"></script>
    <script type="text/javascript" async="" src="https://www.google-analytics.com/ga.js"></script>
    <script type="text/javascript" src="http://fast.fonts.net/jsapi/57aed01a-504f-4ba3-a643-3ebfb24a6375.js"> </script>
    <script src="/static/jquery/js/jquery.min.js"> </script>
    <script src="/static/base/js/sugar-1.3.9.min.js"> </script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32216917-1']);
    _gaq.push(['_setDomainName', 'mand3l.com']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
    </script>
    <script data-validation="snoop_embed_code_ok" type="text/javascript">
    (function() {
      var sn = document.createElement('script');
      sn.type = 'text/javascript';
      sn.async = true;
      sn.src = '/static/snoop/sn.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(sn, s);
    })();
    </script>
</head>

<body id="portfolio" class="">
    <div id="side-menu">
        <img class="headshot" width="120px" height="120px" src="/static/base/img/headshot.png">
<p class="bio">Hi! I'm Paul. I'm a designer and technologist who specializes in leading cross-functional teams to deliver great products with experiences that go beyond traditional screen-based UIs. I'm not currently looking for new projects, but if you want to connect feel free to drop me a line.</p>
        <p><a href="https://paulmandel-resume.web.app/">» Resume</a></p>
        <ul class="unstyled inline centered">
            <li><a href="mailto:paul@mand3l.com"><img width="50px" height="50px" src="/static/base/img/gmail.png"></a></li>
            <li><a href="http://www.github.com/paulmand3l/" target="_blank"><img width="50px" height="50px" src="/static/base/img/github.png"></a></li>
            <li><a href="http://blog.mand3l.com/" target="_blank"><img width="50px" height="50px" src="/static/base/img/rss.png"></a></li>
            <li><a href="http://www.linkedin.com/in/pmandel/" target="_blank"><img width="50px" height="50px" src="/static/base/img/linkedin.png"></a></li>
            <li><a href="https://www.facebook.com/pmandel" target="_blank"><img width="50px" height="50px" src="/static/base/img/facebook.png"></a></li>
        </ul>
    </div>
    <div id="wrapper">
        <div class="navbar clearfix">
            <div class="navbar-inner">
                <a class="brand noMagic" href="/portfolio/">Paul<br>Mandel</a>
            </div>
        </div>
        <div id="main" class="container">
            <div id="content">
                <div id="project">
                    <div class="row banner">
                        <div class="span12">
                            <div class="controls">
                                <input id="type-here" class="span12" type="text" placeholder="type here">
                            </div>
                            <div id="lines">
                              <p class="line"></p>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="description">
                        <p>This is an experiement designed to simulate the experience of suspended typing on a Leap Motion device. When using a Leap Motion, there is no visual or haptic feedback for locating the positions of keys on a virtual keyboard. However, the Leap Motion is quite good at detecting subtle changes in relative finger position.</p>
                        <p>The key insight was applying the principles of T-9 input to a standard keyboard. Instead of mapping numbers to sets of letters, I map the keys of the home row to the letters accessible to the corresponding finger. Typing 'a' indicates you want either a 'q', 'a' or 'z' at that position in the word. Typing 'b' indicates 'w', 's' or 'x', etc. For example, to type 'the', you would type 'fjd'. 'hello world' is entered as 'jdlll slfld'.</p>
                        <p>In the final design the right thumb would be used to indicate 'space,' the left thumb would be 'backspace' and touching the thumb and index finger together would be the gesture to cycle possible words. Since standard keyboards can't recognize gestural input, tapping 'esc' cycles words in this test.</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="footer">
            <div class="centered">
                <p class="muted">© Paul Mandel</p>
            </div>
        </div>
    </div>
    <script src="/static/bootstrap/js/bootstrap-transition.js"> </script>
    <script src="/static/bootstrap/js/bootstrap-modal.js"> </script>
    <script src="/static/bootstrap/js/bootstrap-tab.js"> </script>
    <script src="/static/bootstrap/js/bootstrap-tooltip.js"> </script>
    <script src="/static/bootstrap/js/bootstrap-popover.js"> </script>
    <script src="/static/bootstrap/js/bootstrap-button.js"> </script>
    <script src="/static/bootstrap/js/bootstrap-affix.js"> </script>
    <script src="/static/base/js/core.js"> </script>
    <script src="/static/base/js/base.js"> </script>
    <script src="/static/mathscribe/js/jqmath-etc-0.3.0.min.js" type="text/javascript"> </script>
    <script src="/static/flexslider/jquery.flexslider.js" type="text/javascript"> </script>
    <script type="text/javascript">
    $(function() {
      const inputEl = document.getElementById('type-here');
      const linesEl = document.getElementById('lines');

      let currentLine = document.getElementClass
      const reverseLookup = {};
      const coverage = {
        a: ['q', 'a', 'z'],
        s: ['w', 's', 'x'],
        d: ['e', 'd', 'c'],
        f: ['r', 'f', 'v', 't', 'g', 'b'],
        j: ['y', 'h', 'n', 'u', 'j', 'm'],
        k: ['i', 'k'],
        l: ['o', 'l'],
        ';': ['p'],
        ' ': [],
        'Backspace': [],
        'ArrowLeft': [],
        'ArrowRight': [],
        'Shift': [],
        'Meta': [],
        'Control': [],
      };

      const mapping = {};
      for (let key in coverage) {
        const letters = coverage[key];
        letters.forEach(letter => mapping[letter] = key)
      }

      const isLetter = c => !!c.match(/[a-z;]/);
      const getBaseWord = w => w.split('').map(c => mapping[c]).join('');

      $.get("https://cdn.jsdelivr.net/gh/first20hours/google-10000-english/google-10000-english.txt").then(words => {
        words = words.split('\n').filter(word => word.length > 0).map(word => word.trim());
        words.forEach(word => {
          const baseWord = getBaseWord(word);
          if (!reverseLookup[baseWord]) reverseLookup[baseWord] = [];
          if (word === baseWord) {
            reverseLookup[baseWord].unshift(word);
          } else {
            reverseLookup[baseWord].push(word);
          }
        });
      });

      const tokenizeLine = line => {
        const tokens = [];
        let lastCharWasLetter = false;
        let currentToken = '';
        line.split('').forEach(c => {
          if (lastCharWasLetter != isLetter(c) && currentToken.length > 0) {
            tokens.push(currentToken);
            currentToken = '';
          }

          currentToken += c;
          lastCharWasLetter = isLetter(c);
        });

        if (currentToken.length > 0) tokens.push(currentToken);
        return tokens;
      }

      const getTokenIndex = letterCount => {
        const tokens = tokenizeLine(inputEl.value);

        let tokenIndex, letterIndex = 0;
        for (tokenIndex = 0; tokenIndex < tokens.length; tokenIndex++) {
          letterIndex += tokens[tokenIndex].length;
          if (letterIndex >= letterCount) break;
        }

        if (!isLetter(tokens[tokenIndex])) tokenIndex += 1;
        console.log(letterCount, tokens, tokens[tokenIndex], tokenIndex);
        return tokenIndex
      }

      const cycleWord = (word, resetCycle) => {
        const baseWord = getBaseWord(word);
        const candidates = reverseLookup[baseWord];
        if (!candidates) return baseWord;
        const wordIndex = candidates.indexOf(word);
        if (wordIndex < 0 || resetCycle) return candidates[0];
        return candidates[(wordIndex + 1) % candidates.length];
      }

      const cycleSelectedWord = resetCycle => {
        if (inputEl.value.length === 0) return;
        const { selectionStart, selectionEnd } = inputEl;
        const startTokenIndex = getTokenIndex(selectionStart);
        const endTokenIndex = getTokenIndex(selectionEnd);
        if (startTokenIndex !== endTokenIndex) return;
        const tokenIndex = startTokenIndex;

        const tokens = tokenizeLine(inputEl.value).map((token, i) => {
          if (i !== tokenIndex) return token;
          return cycleWord(token, resetCycle);
        });

        inputEl.value = tokens.join('');
        inputEl.selectionStart = selectionStart;
        inputEl.selectionEnd = selectionEnd;
      }

      const handleKeydown = e => {
        if (e.key === "Enter") {
          const newLine = document.createElement('p');
          newLine.classList.add('line');
          newLine.innerHTML = inputEl.value;
          linesEl.prepend(newLine);
          inputEl.value = '';
          return;
        }

        if (e.key === "Escape") {
          cycleSelectedWord();
          return;
        }

        if (!coverage[e.key]) {
          console.log("Blocked", e.key);
          e.preventDefault();
          e.stopPropagation();
        }
      }

      const handleInput = e => {
        if (e.inputType === 'insertText' && isLetter(e.data)) {
          cycleSelectedWord(true);
        }
      }

      inputEl.addEventListener('keydown', handleKeydown);
      inputEl.addEventListener('input', handleInput);

      if ("hashtag" in localStorage) {
        console.log("I'm watching you...");
        $.post('/' + localStorage.hashtag + '/', {
          project: "Thome",
          csrfmiddlewaretoken: 'LHFk8cbJBfNKYliPhD7kJNw05XZuRBBu'
        });
      }
    });
    </script>
    <script type="text/javascript">
    </script>

</body>

</html>
